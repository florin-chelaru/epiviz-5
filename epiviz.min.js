(function(){/*
 epiviz
 Copyright (c) 2015 Florin Chelaru & Hector Corrada Bravo
 License: MIT

 Permission is hereby granted, free of charge, to any person obtaining a copy of this software and associated
 documentation files (the "Software"), to deal in the Software without restriction, including without limitation the
 rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the Software, and to
 permit persons to whom the Software is furnished to do so, subject to the following conditions:

 The above copyright notice and this permission notice shall be included in all copies or substantial portions of the
 Software.

 THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE
 WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR
 COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR
 OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
*/
'use strict';var aa=this;function g(a,b){var c=a.split("."),d=aa;c[0]in d||!d.execScript||d.execScript("var "+c[0]);for(var e;c.length&&(e=c.shift());)c.length||void 0===b?d[e]?d=d[e]:d=d[e]={}:d[e]=b}Math.random();function h(a,b){function c(){}c.prototype=b.prototype;a.ra=b.prototype;a.prototype=new c;a.prototype.constructor=a;a.qa=function(a,c,f){for(var n=Array(arguments.length-2),l=2;l<arguments.length;l++)n[l-2]=arguments[l];return b.prototype[c].apply(a,n)}};function k(){}k.prototype.$get=function(){return this};function m(){}h(m,k);Object.defineProperties(m.prototype,{});function q(a){this.G=a;this.C=this.D=null}Object.defineProperties(q.prototype,{$scope:{get:function(){return this.G}},$element:{get:function(){return this.D}},$attrs:{get:function(){return this.C}}});q.prototype.link={pre:function(a,b,c){this.D=b;this.C=c},post:function(a,b,c){this.D=b;this.C=c}};
function t(a,b,c,d){var e;"function"==typeof b.prototype.link?e=function(b,c,d){var e=b[a];return e.link(b,c,d,e)}:(e={},"pre"in b.prototype.link&&(e.pre=function(b,c,d){var e=b[a];e.link.pre.call(e,b,c,d,e)}),"post"in b.prototype.link&&(e.post=function(b,c,d){var e=b[a];e.link.post.call(e,b,c,d,e)}));return u.extend({},d,{link:e,controller:["$scope",function(a){var d=[].concat(u.array.fromArguments(c||[]));d.unshift(a);return u.reflection.applyConstructor(b,d)}],controllerAs:a},b.options||{})};function v(a,b,c){q.apply(this,arguments)}h(v,q);v.prototype.link=function(a,b){console.log(b)};function w(a){x.apply(this,arguments);d3.scale.category10();var b=[new vs.models.Query({target:"chr",test:"==",testArgs:"chr1"}),new vs.models.Query({target:"start",test:"<",testArgs:"1336878"}),new vs.models.Query({target:"end",test:">=",testArgs:"1298894"})];this.la=[u.reflection.wrap({name:"Genetic Variants",children:[],dataChanged:new u.Event,visualizations:[],data:"http://egg2.wustl.edu/roadmap/data/byFileType/signal/consolidated/macs2signal/foldChange/E001-H3K4me1.fc.signal.bigwig http://egg2.wustl.edu/roadmap/data/byFileType/signal/consolidated/macs2signal/foldChange/E001-H3K4me3.fc.signal.bigwig http://egg2.wustl.edu/roadmap/data/byFileType/signal/consolidated/macs2signal/foldChange/E001-H3K9ac.fc.signal.bigwig http://egg2.wustl.edu/roadmap/data/byFileType/signal/consolidated/macs2signal/foldChange/E001-H3K9me3.fc.signal.bigwig http://egg2.wustl.edu/roadmap/data/byFileType/signal/consolidated/macs2signal/foldChange/E001-H3K27me3.fc.signal.bigwig http://egg2.wustl.edu/roadmap/data/byFileType/signal/consolidated/macs2signal/foldChange/E001-H3K36me3.fc.signal.bigwig".split(" ").map(function(a,
d){return new vs.models.plugins.BigwigDataSource(a,{initialQuery:b,proxyURL:"bower_components/bigwig.js/test/partial.php",id:"sample"+d})})},vs.ui.DataHandler)];this.a="IMR90 fetal lung fibroblasts Cell Line;ES-WA7 Cells;H9 Cells;ES-I3 Cells;HUES6 Cells;HUES48 Cells;HUES64 Cells;H1 Cells;ES-UCSF4  Cells;iPS-20b Cells;iPS-18 Cells;iPS-15b Cells;iPS DF 6.9 Cells;iPS DF 19.11 Cells;H1 Derived Neuronal Progenitor Cultured Cells;H9 Derived Neuronal Progenitor Cultured Cells;H9 Derived Neuron Cultured Cells;hESC Derived CD56+ Mesoderm Cultured Cells;hESC Derived CD56+ Ectoderm Cultured Cells;hESC Derived CD184+ Endoderm Cultured Cells;H1 BMP4 Derived Mesendoderm Cultured Cells;H1 BMP4 Derived Trophoblast Cultured Cells;H1 Derived Mesenchymal Stem Cells;Primary mononuclear cells from\u00a0peripheral\u00a0blood;Primary T cells from\u00a0peripheral\u00a0blood;Primary T cells effector/memory enriched from peripheral blood;Primary T cells from cord blood;Primary T regulatory cells from\u00a0peripheral\u00a0blood;Primary T helper cells from\u00a0peripheral\u00a0blood;Primary T helper naive cells from\u00a0peripheral\u00a0blood;Primary T helper cells PMA-I stimulated;Primary T helper 17 cells PMA-I stimulated;Primary T helper memory cells from peripheral blood 1;Primary T helper memory cells from peripheral blood 2;Primary T CD8+ memory cells from peripheral blood;Primary T helper naive cells from peripheral blood;Primary T CD8+ naive cells from peripheral blood;Primary monocytes from\u00a0peripheral\u00a0blood;Primary B cells from cord blood;Primary hematopoietic stem cells;Primary hematopoietic stem cells G-CSF-mobilized Male;Primary hematopoietic stem cells G-CSF-mobilized Female;Primary hematopoietic stem cells short term culture;Primary B cells from peripheral blood;Primary Natural Killer cells from\u00a0peripheral\u00a0blood;Primary neutrophils from\u00a0peripheral\u00a0blood;Bone Marrow Derived Cultured Mesenchymal Stem Cells;Mesenchymal Stem Cell Derived Chondrocyte Cultured Cells;Adipose Derived Mesenchymal Stem Cell Cultured Cells;Mesenchymal Stem Cell Derived Adipocyte Cultured Cells;Muscle Satellite Cultured Cells;Foreskin Fibroblast Primary Cells skin01;Foreskin Fibroblast Primary Cells skin02;Foreskin Melanocyte Primary Cells skin01;Foreskin Melanocyte Primary Cells skin03;Foreskin Keratinocyte Primary Cells skin02;Foreskin Keratinocyte Primary Cells skin03;Breast variant Human Mammary Epithelial Cells (vHMEC);Breast Myoepithelial Primary Cells;Ganglion Eminence derived primary cultured neurospheres;Cortex derived primary cultured neurospheres;Thymus;Fetal Thymus;Brain Hippocampus Middle;Brain Substantia Nigra;Brain Anterior Caudate;Brain Cingulate Gyrus;Brain Inferior Temporal Lobe;Brain Angular Gyrus;Brain_Dorsolateral_Prefrontal_Cortex;Brain Germinal Matrix;Fetal Brain Female;Fetal Brain Male;Adipose Nuclei;Psoas Muscle;Skeletal Muscle Female;Skeletal Muscle Male;Fetal Muscle Trunk;Fetal Muscle Leg;Fetal Heart;Right Atrium;Left Ventricle;Right Ventricle;Aorta;Duodenum Smooth Muscle;Colon Smooth Muscle;Rectal Smooth Muscle;Stomach Smooth Muscle;Fetal Stomach;Fetal Intestine Small;Fetal Intestine Large;Small Intestine;Sigmoid Colon;Colonic Mucosa;Rectal Mucosa Donor 29;Rectal Mucosa Donor 31;Stomach Mucosa;Duodenum Mucosa;Esophagus;Gastric;Placenta Amnion;Fetal Kidney;Fetal Lung;Ovary;Pancreatic Islets;Fetal Adrenal Gland;Placenta;Liver;Pancreas;Lung;Spleen;A549 EtOH 0.02pct Lung Carcinoma Cell Line;Dnd41 TCell Leukemia Cell Line;GM12878 Lymphoblastoid Cells;HeLa-S3 Cervical Carcinoma Cell Line;HepG2 Hepatocellular Carcinoma Cell Line;HMEC Mammary Epithelial Primary Cells;HSMM Skeletal Muscle Myoblasts Cells;HSMM cell derived Skeletal Muscle Myotubes Cells;HUVEC Umbilical Vein Endothelial Primary Cells;K562 Leukemia Cells;Monocytes-CD14+ RO01746 Primary Cells;NH-A Astrocytes Primary Cells;NHDF-Ad Adult Dermal Fibroblast Primary Cells;NHEK-Epidermal Keratinocyte Primary Cells;NHLF Lung Fibroblast Primary Cells;Osteoblast Primary Cells".split(";").map(function(a,
b){return{label:a,index:b}});this.ba="";this.P={};this.v=0;this.B=this.a.slice(0,5);this.S="IMR90;ESC;iPSC;ES-deriv;Blood & T-cell;HSC & B-cell;Mesench;Myosat;Epithelial;Neurosph;Thymus;Brain;Adipose;Muscle;Heart;Sm. Muscle;Digestive;Other;ENCODE2012".split(";").map(function(a,b){return{label:a,index:b}});this.da="";this.R={}}h(w,x);
Object.defineProperties(w.prototype,{dataContexts:{get:function(){return this.la}},epigenomes:{get:function(){return this.B},set:function(a){this.B=a}},epigenomeFilter:{get:function(){return this.ba},set:function(a){this.ba=a}},epigenomeSelection:{get:function(){return this.P},set:function(a){this.P=a}},groups:{get:function(){return this.S},set:function(a){this.S=a}},groupFilter:{get:function(){return this.da},set:function(a){this.da=a}},groupSelection:{get:function(){return this.R},set:function(a){this.R=
a}}});w.prototype.U=function(){if(this.B.length>=this.a.length)return!1;++this.v;this.B=this.a.slice(0,5*this.v);return!0};w.prototype.W=function(){var a=this;this.a.forEach(function(b){a.P[b.index]=b})};w.prototype.V=function(){return!1};w.prototype.X=function(){var a=this;this.S.forEach(function(b){a.R[b.index]=b})};function y(a,b){q.apply(this,arguments);this.a=b}h(y,q);y.prototype.link=function(a,b){function c(){f.get(0).scrollHeight<=f.height()&&e&&(e=a.ngbLoadMore(),d.a(c,0))}var d=this,e=!0,f=b.find("> .list-group");c();f.scroll(function(){d.a(function(){e&&f.get(0).scrollHeight-f.scrollTop()==f.height()&&(e=a.ngbLoadMore())},0)});a.$watch("ngbFilter",function(){c()})};
y.prototype.select=function(a){a.index in this.$scope.ngbSelection?delete this.$scope.ngbSelection[a.index]:this.$scope.ngbSelection[a.index]=a};
Object.defineProperty(y,"options",{get:function(){return{template:'<div class="nav navbar navbar-default" ng-if="ngbTitle"><div class="navbar-header"><div class="navbar-brand">{{ ngbTitle }}</div></div></div><form class="ngb-list-search" role="search"><div class="input-group"><input type="text" class="form-control" placeholder="Search" ng-model="ngbFilter"><div class="input-group-btn"><button type="button" class="btn btn-default" aria-label="Select all" ng-click="ngbSelectAll()"><span class="fa fa-check-square"></span></button><button type="button" class="btn btn-default" aria-label="Clear selection" ng-click="ngbMultiselectList.clearSelection()"><span class="fa fa-square-o"></span></button></div></div></form><div class="list-group list" ng-class="{\'ngb-has-title\': !!ngbTitle}"><a ng-repeat="item in ngbItems | filter:ngbFilter" href="" class="list-group-item" ng-class="{\'active\': ngbMultiselectList.isSelected(item)}" ng-click="ngbMultiselectList.select(item)" >{{ item.label }}</a></div>',scope:{ngbTitle:"=",
ngbItems:"=",ngbFilter:"=",ngbSelection:"=",ngbLoadMore:"&",ngbSelectAll:"&"}}}});function z(a,b,c){function d(a,b){return c(function(a){void 0==b&&(b=r||"");var c=n[b];if(c&&c["in"]){c["in"]=!1;var d=c.$container,e=c.$backdrop;r=null;var A=!1,X=!1;d.one("transitionend",function(){d.css("display","");A=!0;X&&a()});e.one("transitionend",function(){e.css("display","");X=!0;A&&a()});f.removeClass("ngb-sidebar-in"+b.replace(/\./g," "));ba(l);l=null}else a()})}function e(a,b){return c(function(c){if(null!=r)r==b?c():d(0,r).then(function(){e(a,b)});else{r=b=b||"";var p=n[b];if(p&&p["in"])c();
else{p||(p={"in":!0,$container:$(".ngb-sidebar-container"+b),$backdrop:$(".ngb-sidebar-backdrop"+b)},n[b]=p);p["in"]=!0;var L=p.$container,p=p.$backdrop,V=!1,W=!1;L.one("transitionend",function(){V=!0;W&&c()});p.one("transitionend",function(){W=!0;V&&c()});L.css("display","block");u.reflowForTransition(L[0]);p.css("display","block");u.reflowForTransition(p[0]);f.addClass("ngb-sidebar-in"+b.replace(/\./g," "));l||(l=ca())}}})}q.apply(this,arguments);var f=$("body"),n={},l=null,r=null;b.$on("sidebarOn",
e);b.$on("sidebarOff",d);b.$on("sidebarToggle",function(a,b){void 0==b&&(b=r||"");var c=n[b];c&&c["in"]?d(0,b):e(a,b)})}h(z,q);z.prototype.link=function(){};function B(a,b){q.apply(this,arguments);this.a=b}h(B,q);B.options={template:'<div class="ngb-modal-overlay"><div class="ngb-loader" ng-class="loaderClass || \'\'"></div></div><div class="modal-header" ng-include="headerTemplateUrl" onload="headerLoaded()"></div><div class="modal-body"></div><div class="modal-footer" ng-include="footerTemplateUrl" onload="footerLoaded()"></div>'};
B.prototype.link=function(a,b){var c=$("body"),d=b.parent();c.removeClass("ngb-modal-open");var e=this.a;a.$on("modal.closing",function(){c.removeClass("ngb-modal-open-blur")});a.bodyLoaded=function(){var a=b.find(".ngb-modal-overlay");a.one("transitionend",function(){a.css("display","none")});a.css("opacity","0");c.addClass("ngb-modal-open")};a.fixed&&(a.headerLoaded=function(){var c=b.find(".modal-header");a.$watch(function(){return c.outerHeight()},function(a){d.css("padding-top",a)})},a.footerLoaded=
function(){var c=b.find(".modal-footer");a.$watch(function(){return c.outerHeight()},function(a){d.css("padding-bottom",a)})});a.$ngbAnimation.promise.then(function(){c.addClass("ngb-modal-open-blur");var d=angular.element('<div ng-include="bodyTemplateUrl" onload="bodyLoaded()"></div>'),d=e(d)(a);b.find(".modal-body").append(d)})};function C(a,b){q.apply(this,arguments)}h(C,q);C.prototype.link=function(a,b){var c=new google.maps.places.SearchBox(b[0]);c.addListener("places_changed",function(){b.triggerHandler("input");a.ngbPlacesChanged&&a.ngbPlacesChanged({searchBox:c})})};C.options={scope:{ngbPlacesChanged:"&"}};function x(a){this.G=a;this.j=u.generatePseudoGUID(6)}Object.defineProperties(x.prototype,{id:{get:function(){return this.j}},$scope:{get:function(){return this.G}}});function D(){this.j=u.generatePseudoGUID(6)}Object.defineProperties(D.prototype,{id:{get:function(){return this.j}}});function E(a,b){this.j=u.generatePseudoGUID(6);var c=this;this.Z=b||[];this.Z.push(function(){var b=u.array.fromArguments(arguments);b.unshift(c);return u.reflection.applyConstructor(a,b)})}Object.defineProperties(E.prototype,{id:{get:function(){return this.j}},$get:{get:function(){return this.Z}}});function F(a){D.apply(this,arguments);this.na=a}Object.defineProperties(F.prototype,{provider:{get:function(){return this.na}}});function G(a){q.apply(this,arguments)}h(G,q);G.prototype.link=function(a,b,c){b.css({display:"none",opacity:"0"});a.$watch(c.nguFade,function(a){a?(b.css("display","block"),u.reflowForTransition(b[0]),b.css("opacity","1")):parseInt(b.css("opacity"),10)?(b.css("opacity","0"),b.one("transitionend",function(){b.css("display","none")})):(b.css("display","none"),b.css("opacity","0"))})};function H(a){q.apply(this,arguments)}h(H,q);H.prototype.link=function(a,b,c){b[0].addEventListener("transitionend",function(){var b=c.nguTransitionEnd;b&&(a.$eval(b),a.$$phase||a.$apply())})};function I(a){q.apply(this,arguments)}h(I,q);I.prototype.link=function(a,b){b.replaceWith(b.children())};function J(a){q.apply(this,arguments)}h(J,q);J.prototype.link=function(a,b,c){b[0].addEventListener("transitionend",function(){var d=c.nguShowAfterTransition;d&&(a.$eval(d)?b.css("display","block"):b.css("display","none"),a.$$phase||a.$apply())})};var K=angular.module("ngu",[]);K.directive("nguTransitionEnd",[function(){return t("nguTransitionEnd",H,arguments,{restrict:"AC"})}]);K.directive("nguShowAfterTransition",[function(){return t("nguShowAfterTransition",J,arguments,{restrict:"AC"})}]);K.directive("nguFade",[function(){return t("nguFade",G,arguments,{restrict:"AC"})}]);K.directive("nguIncludeReplace",[function(){return t("nguIncludeReplace",I,arguments,{restrict:"A",require:"ngInclude"})}]);
function M(){var a;a=navigator.userAgent;a=a.toLowerCase();a=/(chrome)[ \/]([\w.]+)/.exec(a)||/(webkit)[ \/]([\w.]+)/.exec(a)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(a)||/(msie) ([\w.]+)/.exec(a)||0>a.indexOf("compatible")&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(a)||[];a={browser:a[1]||"",version:a[2]||"0"};var b={};a.browser&&(b[a.browser]=!0,b.version=a.version);b.chrome?b.webkit=!0:b.webkit&&(b.safari=!0);return b}
function ca(){var a={Y:null,scrollTop:null},b=$("html"),c=$("body"),b=0<(c.scrollTop()||0)?c:b;a.Y=b;a.scrollTop=b.scrollTop()||0;if(M().oa){var c=b.width(),d=b.get(0).scrollHeight>b.height()+parseFloat(b.css("padding-top"))+parseFloat(b.css("padding-bottom"));b.css("overflow-y",d?"scroll":"hidden");b.css("position","fixed");b.css("top",-a.scrollTop);b.css("width",c)}return a}
function ba(a){var b=a.Y;b.css("overflow-y","");M().oa&&(b.css("position",""),b.css("top",""),b.css("width",""));b.scrollTop(a.scrollTop)};function da(a,b){E.apply(this,arguments);this.options={useDefault:!1,animation:!0}}h(da,E);
function ea(a,b,c,d){F.apply(this,arguments);d.put("ngb/template/modal/window.html",'<div modal-render="{{$isRendered}}" tabindex="-1" role="dialog" class="modal ngb-modal" uib-modal-animation-class="fade" modal-in-class="in" ng-style="{\'z-index\': 1050 + index*10, display: \'block\'}"><div class="modal-dialog {{size ? \'modal-\' + size : \'\'}}" ngu-transition-end="$parent.$ngbAnimation.resolve()"><div class="modal-content" uib-modal-transclude></div></div></div>');d.put("ngb/template/modal/content.html",
'<div class="ngb-patient-modal"></div>');d.put("ngb/template/modal/header.html",'<button type="button" class="close" ng-click="close()" aria-hidden="true">\u00d7</button><h4 class="modal-title">{{ title }}</h4>');d.put("ngb/template/modal/footer-buttons.html",'<button ng-repeat="btn in footerButtons" type="button" class="btn" ng-class="btn.class != undefined ? btn.class : \'btn-default\'" ng-click="btn.click && btn.click()" ng-disabled="btn.disabled && btn.disabled()">{{ btn.label }}</button>');d.put("ngb/template/modal/footer-input-text.html",
'<form role="form" class="input-group"><textarea class="form-control ngb-modal-input-text" ng-disabled="!inputTextEnabled" ng-keyup="adjustHeight($event)" ng-model="$parent.inputText" ng-attr-placeholder="{{ inputTextWatermark }}"></textarea><span class="input-group-addon" ng-class="{\'ngb-blocked\': !inputButtonEnabled, \'btn btn-primary\': !!inputButtonEnabled}" ng-click="inputButtonEnabled && sendMessage()"><span class="fa fa-chevron-right"></span></span></form>')}h(ea,F);
function N(a,b,c,d,e){x.apply(this,arguments);this.F=b;this.ja=c;this.ka=d;this.ea="Write an answer...";a.$ngbAnimation=c;a.bodyTemplateUrl=d;a.title=e.title;a.loaderClass=e.loaderClass;a.headerTemplateUrl=e.headerTemplateUrl;a.footerTemplateUrl=e.footerTemplateUrl;a.fixed=e.fixed;var f=this;a.close=function(){f.F.dismiss("close")};a.footerButtons=this.footerButtons;var n,l;a.adjustHeight=function(a){a=a.target;var b=$(a);void 0==n&&(n=b.outerHeight(),l=a);a.style.height=parseFloat(b.css("border-top-width"))+
parseFloat(b.css("border-bottom-width"))+a.scrollHeight+"px"};a.inputTextEnabled=!0;a.inputButtonEnabled=!0;Object.defineProperties(a,{inputText:{get:function(){return f.inputText},set:function(a){f.inputText=a}},inputTextWatermark:{get:function(){return f.inputTextWatermark},set:function(a){f.inputTextWatermark=a}}});a.sendMessage=function(){e.sendMessage&&e.sendMessage(a.inputText).then(function(){l&&(l.style.height=n+"px");a.inputText=""},function(){})}}h(N,x);
Object.defineProperties(N.prototype,{$modalInstance:{get:function(){return this.F}},$ngbAnimation:{get:function(){return this.ja}},bodyTemplateUrl:{get:function(){return this.ka}},footerButtons:{get:function(){var a=this.F;return[{label:"Ok",click:function(){a.close()},disabled:function(){return!1},"class":"btn-primary"},{label:"Cancel",click:function(){a.dismiss("cancel")},"class":"btn-default",disabled:function(){return!1}}]}},inputText:{get:function(){void 0==this.T&&(this.T="");return this.T},
set:function(a){this.T=a}},inputTextWatermark:{get:function(){return this.ea},set:function(a){this.ea=a}}});var O=angular.module("ngb",["ngu","ui.bootstrap","ngAnimate"]);O.directive("ngbMultiselectList",["$timeout",function(){return t("ngbMultiselectList",y,arguments,{restrict:"A"})}]);O.directive("ngbPatientModal",["$compile",function(){return t("ngbPatientModal",B,arguments,{restrict:"C"})}]);O.directive("ngbHasSidebar",["$rootScope","$q",function(){return t("ngbHasSidebar",z,arguments)}]);O.directive("ngbGoogleMapsSearchbox",["$timeout",function(){return t("ngbGoogleMapsSearchbox",C,arguments,{restrict:"A"})}]);
O.provider("$ngbModal",function(){return new da(ea,["$uibModal","$q","$templateCache"])});O.controller("ngb.s.ModalController",["$scope","$uibModalInstance","$ngbAnimation","bodyTemplateUrl","options",function(){return u.reflection.applyConstructor(N,arguments)}]);function P(a,b,c,d,e,f,n){N.apply(this,arguments);this.a=f;this.A=n;this.aa=this.ga=this.o=this.m=this.fa=null;this.ca={};this.I=this.O=this.L=this.H=this.K=this.N=this.J=this.M=!1}h(P,N);
Object.defineProperties(P.prototype,{visualizations:{get:function(){return Object.keys(this.A.options.visualizations)}},selectedVis:{get:function(){return this.fa||this.visualizations[0]},set:function(a){this.fa=a;this.o=null}},renderEngines:{get:function(){return Object.keys(this.A.options.visualizations[this.selectedVis]).filter(function(a){return"default"!=a})}},selectedRenderEngine:{get:function(){var a=this.A.options.visualizations[this.selectedVis];this.m&&this.m in a||(this.m="default"in a?
a["default"]:a[Object.keys(a)[0]]);return this.m},set:function(a){this.m=a;this.o=null}},selectedVisSettings:{get:function(){Q(this);return this.ga}},editableSettings:{get:function(){Q(this);return this.aa}},selectedVisOptions:{get:function(){Q(this);return this.o}},form:{get:function(){return this.ca},set:function(a){this.ca=a}},footerButtons:{get:function(){var a=this,b=this.$modalInstance;return[{label:"Ok",click:function(){b.close({visualization:a.selectedVis,engine:a.selectedRenderEngine,options:a.selectedVisOptions})},
disabled:function(){return!1},"class":"btn-primary"},{label:"Cancel",click:function(){b.dismiss("cancel")},"class":"btn-default",disabled:function(){return!1}}]}},editTop:{get:function(){return this.M},set:function(a){R(this);this.M=a}},editLeft:{get:function(){return this.J},set:function(a){R(this);this.J=a}},editTopMargin:{get:function(){return this.N},set:function(a){R(this);this.N=a}},editLeftMargin:{get:function(){return this.K},set:function(a){R(this);this.K=a}},editRightMargin:{get:function(){return this.L},
set:function(a){R(this);this.L=a}},editBottomMargin:{get:function(){return this.H},set:function(a){R(this);this.H=a}},editWidth:{get:function(){return this.O},set:function(a){R(this);this.O=a}},editHeight:{get:function(){return this.I},set:function(a){R(this);this.I=a}}});
function Q(a){if(!a.o){var b=u.reflection.evaluateFullyQualifiedTypeName(a.A.options.visualizations[a.selectedVis][a.selectedRenderEngine]),c=b?b.Settings:{},d={},e=a.a;u.each(c,function(a,b){d[a]=b.getValue(d,null,e.data,c)});var f={};u.each(c,function(a,b){0>["x","y","width","height","margins"].indexOf(a)&&(f[a]=b)});a.o=d;a.ga=c;a.aa=f}}function R(a){a.M=a.J=a.N=a.K=a.L=a.H=a.O=a.I=!1};var S=String.prototype.repeat?function(a,b){return a.repeat(b)}:function(a,b){return Array(b+1).join(a)};Math.random();function T(a,b){var c=Array.prototype.slice.call(arguments),d=c.shift();if("undefined"==typeof d)throw Error("[goog.string.format] Template required");return d.replace(/%([0\-\ \+]*)(\d+)?(\.(\d+))?([%sfdiu])/g,function(a,b,d,l,r,A,fa,ga){if("%"==A)return"%";var p=c.shift();if("undefined"==typeof p)throw Error("[goog.string.format] Not enough arguments");arguments[0]=p;return U[A].apply(null,arguments)})}
var U={s:function(a,b,c){return isNaN(c)||""==c||a.length>=c?a:a=-1<b.indexOf("-",0)?a+S(" ",c-a.length):S(" ",c-a.length)+a},f:function(a,b,c,d,e){d=a.toString();isNaN(e)||""==e||(d=parseFloat(a).toFixed(e));var f;f=0>a?"-":0<=b.indexOf("+")?"+":0<=b.indexOf(" ")?" ":"";0<=a&&(d=f+d);if(isNaN(c)||d.length>=c)return d;d=isNaN(e)?Math.abs(a).toString():Math.abs(a).toFixed(e);a=c-d.length-f.length;0<=b.indexOf("-",0)?d=f+d+S(" ",a):(b=0<=b.indexOf("0",0)?"0":" ",d=f+S(b,a)+d);return d},d:function(a,
b,c,d,e,f,n,l){return U.f(parseInt(a,10),b,c,d,0,f,n,l)}};U.i=U.d;U.u=U.d;function Y(a,b){x.apply(this,arguments);this.a=a.vsDataContext.handler;this.v=a.vsWindow.$window;this.ma=this.a.name;var c=vs.models.GenomicRangeQuery.extract(u.fast.concat(u.fast.map(this.a.data,function(a){return a.query})));this.c=T("%s:%s-%s",c.chr,c.start,c.end);this.U=/^\s*([a-zA-Z0-9]+)\s*\:\s*([0-9]+)\s*\-\s*([0-9]+)\s*$/}h(Y,x);Object.defineProperties(Y.prototype,{name:{get:function(){return this.ma}},location:{get:function(){return this.c},set:function(a){this.c=a}}});
Y.prototype.query=function(){var a=this.c.match(this.U);(!a||4>a.length)&&u.log.error("Invalid query:"+this.c);try{var b=new vs.models.GenomicRangeQuery(a[1],parseInt(a[2],10),parseInt(a[3],10));u.log.info(b.chr+" "+b.start+" "+b.end);this.a.query(b.query).then(function(a){u.log.info("query, data:",b,a)})}catch(c){u.log.error(c)}};
Y.prototype.V=function(){try{var a=vs.models.GenomicRangeQuery.extract(u.fast.concat(u.fast.map(this.a.data,function(a){return a.query}))),b=a.end-a.start;if(!(0>=b)){var c=Math.max(0,a.start-Math.ceil(.1*b));this.c=T("%s:%s-%s",a.chr,c,c+b);this.query()}}catch(d){u.log.error(d)}};
Y.prototype.X=function(){try{var a=vs.models.GenomicRangeQuery.extract(u.fast.concat(u.fast.map(this.a.data,function(a){return a.query}))),b=a.end-a.start;if(!(0>=b)){var c=Math.ceil(.1*b);this.c=T("%s:%s-%s",a.chr,a.start+c,a.end+c);this.query()}}catch(d){u.log.error(d)}};
Y.prototype.ia=function(){try{var a=vs.models.GenomicRangeQuery.extract(u.fast.concat(u.fast.map(this.a.data,function(a){return a.query}))),b=a.end-a.start;if(!(0>=b)){var c=Math.ceil(.1*b),d=Math.max(0,a.start-c);this.c=T("%s:%s-%s",a.chr,d,d+b+2*c);this.query()}}catch(e){u.log.error(e)}};
Y.prototype.ha=function(){try{var a=vs.models.GenomicRangeQuery.extract(u.array.unique(u.fast.concat(u.fast.map(this.a.data,function(a){return a.query})))),b=a.end-a.start;if(!(1>=b)){var c=Math.ceil(.1*b);if(!(1>b-2*c)){var d=a.start+c;this.c=T("%s:%s-%s",a.chr,d,d+b-2*c);this.query()}}}catch(e){u.log.error(e)}};Y.prototype.W=function(a){this.v.trigger(new $.Event("mousedown",{target:this.v[0],originalEvent:a,pageX:a.pageX,pageY:a.pageY}))};u.log.pa="info";var Z=angular.module("epiviz",["vs","ngb"]);Z.provider("epivizConfig",function(){return new m});Z.config(["epivizConfigProvider",function(){}]);
Z.config(["configurationProvider",function(a){a.customize({visualizations:{scatterplot:{canvas:"vs.ui.plugins.canvas.ScatterPlot",svg:"vs.ui.plugins.svg.ScatterPlot","default":"svg"},manhattan:{svg:"vs.ui.plugins.svg.ManhattanPlot",canvas:"vs.ui.plugins.canvas.ManhattanPlot","default":"svg"},heatmap:{svg:"vs.ui.plugins.svg.Heatmap","default":"svg"}},parallel:{nthreads:16,worker:"/worker.js"}})}]);
Z.config(["linkProvider",function(a){function b(a,b,c){return u.fast.concat(u.fast.map(b,function(a){return u.fast.filter(c.d,function(b){return b.chr==a.chr&&b.start<a.end&&b.end>a.start})}))}for(var c=0;5>c;++c)for(var d=c+1;6>d;++d)a.register("sample"+c,"sample"+d,b),a.register("sample"+d,"sample"+c,b)}]);Z.controller("epiviz.controllers.Master",["$scope",function(a){return u.reflection.applyConstructor(w,arguments)}]);
Z.controller("epiviz.controllers.DataContext",["$scope","$ngbModal",function(a){return u.reflection.applyConstructor(Y,arguments)}]);Z.controller("epiviz.controllers.AddVisualization",["$scope","$uibModalInstance","$ngbAnimation","bodyTemplateUrl","options","dataHandler","configuration",function(){return u.reflection.applyConstructor(P,arguments)}]);Z.directive("ngbInfiniteNumberSlider",[function(){return t("ngbInfiniteNumberSlider",v,arguments,{restrict:"A"})}]);g("epiviz.Configuration",m);g("epiviz.controllers.DataContext",Y);Y.prototype.query=Y.prototype.query;Y.prototype.left=Y.prototype.V;Y.prototype.right=Y.prototype.X;Y.prototype.zoomOut=Y.prototype.ia;Y.prototype.zoomIn=Y.prototype.ha;Y.prototype.mousedown=Y.prototype.W;g("epiviz.controllers.Master",w);w.prototype.loadMoreEpigenomes=w.prototype.U;w.prototype.selectAllEpigenomes=w.prototype.W;w.prototype.loadMoreGroups=w.prototype.V;w.prototype.selectAllGroups=w.prototype.X;}).call(this); //@ sourceMappingURL=epiviz.min.js.map
